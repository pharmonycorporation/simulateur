{% load static %}

<!DOCTYPE html>

<!--
* CoreUI - Free Bootstrap Admin Template
* @version v3.2.0
* @link https://coreui.io
* Copyright (c) 2020 creativeLabs Łukasz Holeczek
* Licensed under MIT (https://coreui.io/license)
-->

<html lang="fr">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.23/b-1.6.5/b-colvis-1.6.5/b-html5-1.6.5/r-2.2.7/datatables.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
<style>
.cemaclogo{
  width:30px;
  height:20px;
}

.loader{
	background: url('static/assets/img/simulateur.gif') 50% 50% no-repeat rgba(255, 255, 255, 0.8);
	cursor: wait;
	height: 100%;
	left: 0;
	position: fixed;
	top: 0;
	width: 100%;
	z-index: 9999;
}
.loader h1{
		background: none;
		border: none;
		color: 	#002669;
		font-size: 22px;
		font-family: "Open Sans",sans-serif;
		font-variant: small-caps;
		font-weight: 700;
		height: 700px;
		line-height: 700px;
		margin: 140px 0 0;
		padding: 0;
		text-align: center;
	}
.slow-transition {
  box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.3);
  transition: box-shadow 500ms;
}

.slow-transition:hover {
  box-shadow: 0 10px 50px 0 rgba(0, 0, 0, 0.5);
}

/* The fast, new way! */
.fast-transition {
  position: relative; /* For positioning the pseudo-element */
  box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.3);
}

.fast-transition::before {
  /* Position the pseudo-element. */
  content: ' ';
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;

  /* Create the box shadow at expanded size. */
  box-shadow: 0 10px 50px 0 rgba(204,169,44, 0.5);

  /* Hidden by default. */
  opacity: 0;
  transition: opacity 500ms;
}

.fast-transition:hover::before {
  /* Show the pseudo-element on hover. */
  opacity: 1;
}

#sim {
    -webkit-transition: width 2s ease;
    -moz-transition: width 2s ease;
    -o-transition: width 2s ease;
    transition: width 2s ease;
    overflow-y: scroll;
    overflow-x: hidden;
    display: inline-block;
    white-space: nowrap;
    background: #D20F36;
    vertical-align: middle;
    width: 0px;
    box-shadow:0 0 0 rgba(204,169,44, 0.4);
}
#sim.in {
    width: 80%;
    border:0px;
    z-index:99999;
    max-height:90%;
    
}

.pulse {
  position:fixed;
  bottom:85px;
  left:20px;
  display: none;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 0 0 rgba(204,169,44, 0.4);
  animation: pulse 2s infinite;
  z-index:99999;
  border:0px;
  text-decoration :none;
  color:#ffffff; 
  background:#002669
}

.fixedroit {
  cursor:pointer;
  position:fixed;
  bottom:20px;
  left:20px;
  display: none;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 0 0 rgba(204,169,44, 0.4);
  animation: pulse 2s infinite;
  z-index:9999999;
  border:0px;
  text-decoration :none;
  color:#ffffff; 
  background:#002669
}
.pulse:hover {
  animation: none;
  border:0px;
}

@-webkit-keyframes pulse {
  0% {
    -webkit-box-shadow: 0 0 0 0 rgba(204,169,44, 0.4);
  }
  70% {
      -webkit-box-shadow: 0 0 0 10px rgba(204,169,44, 0);
  }
  100% {
      -webkit-box-shadow: 0 0 0 0 rgba(204,169,44, 0);
  }
}
@keyframes pulse {
  0% {
    -moz-box-shadow: 0 0 0 0 rgba(204,169,44, 0.4);
    box-shadow: 0 0 0 0 rgba(204,169,44, 0.4);
  }
  70% {
      -moz-box-shadow: 0 0 0 10px rgba(204,169,44, 0);
      box-shadow: 0 0 0 10px rgba(204,169,44, 0);
  }
  100% {
      -moz-box-shadow: 0 0 0 0 rgba(204,169,44, 0);
      box-shadow: 0 0 0 0 rgba(204,169,44, 0);
  }
}ont: inherit;
}



.footer-widget p {
    margin-bottom: 27px;
}
p {
    font-family: 'Nunito', sans-serif;
    font-size: 16px;
  color:white;
    line-height: 28px;
}

   .animate-border {
  position: relative;
  display: block;
  width: 115px;
  height: 3px;
  background: #007bff; }

.animate-border:after {
  position: absolute;
  content: "";
  width: 35px;
  height: 3px;
  left: 0;
  bottom: 0;
  border-left: 10px solid #fff;
  border-right: 10px solid #fff;
  -webkit-animation: animborder 2s linear infinite;
  animation: animborder 2s linear infinite; }

@-webkit-keyframes animborder {
  0% {
    -webkit-transform: translateX(0px);
    transform: translateX(0px); }
  100% {
    -webkit-transform: translateX(113px);
    transform: translateX(113px); } }

@keyframes animborder {
  0% {
    -webkit-transform: translateX(0px);
    transform: translateX(0px); }
  100% {
    -webkit-transform: translateX(113px);
    transform: translateX(113px); } }

.animate-border.border-white:after {
  border-color: #fff; }

.animate-border.border-yellow:after {
  border-color: #F5B02E; }

.animate-border.border-orange:after {
  border-right-color: #007bff;
  border-left-color: #007bff; }

.animate-border.border-ash:after {
  border-right-color: #EEF0EF;
  border-left-color: #EEF0EF; }

.animate-border.border-offwhite:after {
  border-right-color: #F7F9F8;
  border-left-color: #F7F9F8; }

/* Animated heading border */
@keyframes primary-short {
  0% {
    width: 15%; }
  50% {
    width: 90%; }
  100% {
    width: 10%; } }

@keyframes primary-long {
  0% {
    width: 80%; }
  50% {
    width: 0%; }
  100% {
    width: 80%; } } 

.dk-footer {
  padding: 75px 0 0;
  background-color: #151414;
  position: relative;
  z-index: 2; }
  .dk-footer .contact-us {
    margin-top: 0;
    margin-bottom: 30px;
    padding-left: 80px; }
    .dk-footer .contact-us .contact-info {
      margin-left: 50px; }
    .dk-footer .contact-us.contact-us-last {
      margin-left: -80px; }
  .dk-footer .contact-icon i {
    font-size: 24px;
    top: -15px;
    position: relative;
    color:#007bff; }

.dk-footer-box-info {
  position: absolute;
  top: -122px;
  background: #202020;
  padding: 40px;
  z-index: 2; }
  .dk-footer-box-info .footer-social-link h3 {
    color: #fff;
    font-size: 24px;
    margin-bottom: 25px; }
  .dk-footer-box-info .footer-social-link ul {
    list-style-type: none;
    padding: 0;
    margin: 0; }
  .dk-footer-box-info .footer-social-link li {
    display: inline-block; }
  .dk-footer-box-info .footer-social-link a i {
    display: block;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    text-align: center;
    line-height: 40px;
    background: #000;
    margin-right: 5px;
    color: #fff; }
    .dk-footer-box-info .footer-social-link a i.fa-facebook {
      background-color: #3B5998; }
    .dk-footer-box-info .footer-social-link a i.fa-twitter {
      background-color: #55ACEE; }
    .dk-footer-box-info .footer-social-link a i.fa-google-plus {
      background-color: #DD4B39; }
    .dk-footer-box-info .footer-social-link a i.fa-linkedin {
      background-color: #0976B4; }
    .dk-footer-box-info .footer-social-link a i.fa-instagram {
      background-color: #B7242A; }

.footer-awarad {
  margin-top: 285px;
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-flex: 0;
  -webkit-flex: 0 0 100%;
  -moz-box-flex: 0;
  -ms-flex: 0 0 100%;
  flex: 0 0 100%;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -moz-box-align: center;
  -ms-flex-align: center;
  align-items: center; }
  .footer-awarad p {
    color: #fff;
    font-size: 24px;
    font-weight: 700;
    margin-left: 20px;
    padding-top: 15px; }

.footer-info-text {
  margin: 26px 0 32px; }

.footer-left-widget {
  padding-left: 80px; }

.footer-widget .section-heading {
  margin-bottom: 35px; }

.footer-widget h3 {
  font-size: 24px;
  color: #fff;
  position: relative;
  margin-bottom: 15px;
  max-width: -webkit-fit-content;
  max-width: -moz-fit-content;
  max-width: fit-content; }

.footer-widget ul {
  width: 50%;
  float: left;
  list-style: none;
  margin: 0;
  padding: 0; }

.footer-widget li {
  margin-bottom: 18px; }

.footer-widget p {
  margin-bottom: 27px; }

.footer-widget a {
  color: #878787;
  -webkit-transition: all 0.3s;
  -o-transition: all 0.3s;
  transition: all 0.3s; }
  .footer-widget a:hover {
    color: #007bff; }

.footer-widget:after {
  content: "";
  display: block;
  clear: both; }

.dk-footer-form {
  position: relative; }
  .dk-footer-form input[type=email] {
    padding: 14px 28px;
    border-radius: 50px;
    background: #2E2E2E;
    border: 1px solid #2E2E2E; }
  .dk-footer-form input::-webkit-input-placeholder, .dk-footer-form input::-moz-placeholder, .dk-footer-form input:-ms-input-placeholder, .dk-footer-form input::-ms-input-placeholder, .dk-footer-form input::-webkit-input-placeholder {
    color: #878787;
    font-size: 14px; }
  .dk-footer-form input::-webkit-input-placeholder, .dk-footer-form input::-moz-placeholder, .dk-footer-form input:-ms-input-placeholder, .dk-footer-form input::-ms-input-placeholder, .dk-footer-form input::placeholder {
    color: #878787;
    font-size: 14px; }
  .dk-footer-form button[type=submit] {
    position: absolute;
    top: 0;
    right: 0;
    padding: 12px 24px 12px 17px;
    border-top-right-radius: 25px;
    border-bottom-right-radius: 25px;
    border: 1px solid #007bff;
    background: #007bff;
    color: #fff; }
  .dk-footer-form button:hover {
    cursor: pointer; }

/* ==========================

    Contact

=============================*/
.contact-us {
  position: relative;
  z-index: 2;
  margin-top: 65px;
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -webkit-align-items: center;
  -moz-box-align: center;
  -ms-flex-align: center;
  align-items: center; }

.contact-icon {
  position: absolute; }
  .contact-icon i {
    font-size: 36px;
    top: -5px;
    position: relative;
    color: #007bff; }

.contact-info {
  margin-left: 75px;
  color: #fff; }
  .contact-info h3 {
    font-size: 20px;
    color: #fff;
    margin-bottom: 0; }

.copyright {
  padding: 28px 0;
  margin-top: 55px;
  background-color: #202020; }
  .copyright span,
  .copyright a {
    color: #878787;
    -webkit-transition: all 0.3s linear;
    -o-transition: all 0.3s linear;
    transition: all 0.3s linear; }
  .copyright a:hover {
    color:#007bff; }

.copyright-menu ul {
  text-align: right;
  margin: 0; }

.copyright-menu li {
  display: inline-block;
  padding-left: 20px; }

.back-to-top {
  position: relative;
  z-index: 2; }
  .back-to-top .btn-dark {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    padding: 0;
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #2e2e2e;
    border-color: #2e2e2e;
    display: none;
    
    -webkit-transition: all 0.3s linear;
    -o-transition: all 0.3s linear;
    transition: all 0.3s linear; }
    .back-to-top .btn-dark:hover {
      cursor: pointer;
      background: #FA6742;
      border-color: #FA6742; }
</style>

<head>
  <body>
  
    <nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
      <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">Simulateur des taxes et droits d'importations dans la zone  CEMAC</a>
      
      <ul class="navbar-nav px-3">
        <li class="nav-item text-nowrap">
          <a class="nav-link" href="#">{%if user.is_authenticated %}{{user.first_name}} {{user.last_name}} {%endif%} </a>
        </li>
      </ul>
    </nav>
<br>
<br>
    <div class="container-fluid">
      <div class="row">
        <nav class="col-md-2 d-none d-md-block bg-light sidebar">
          <div class="sidebar-sticky">
          <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
              <span>MENU</span>
              
            </h6>
            <ul class="nav flex-column">
              <li class="nav-item">
                <a class="nav-link active" href="/sdi">
                  <i class="fa fa-home"></i>
                  Accueil <span class="sr-only">(current)</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'up_profile'%}">
                 <i class="fa fa-user"></i>
                  Mon Profil
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'tarification' %}">
                 <i class="fa fa-plus-circle"></i>
                  Simulation
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'signout' %}">
                  <i class="fa fa-sign-out-alt"></i>
                  Deconnexion
                </a>
              </li>
            
              
              
             
            </ul>

            <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
              <span>DOCUMENTS</span>
              
            </h6>
            <ul class="nav flex-column mb-2">
              <li class="nav-item">
                <a class="nav-link" href="{% url 'mes_simulations' %}">
                  <i class="fa fa-microchip"></i>
                  Mes simulations
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{%url 'tec'%}">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bar-chart-2"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
                  TEC
                </a>
              </li>
              
            </ul>
          </div>
        </nav>

        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4"><div class="chartjs-size-monitor" style="position: absolute; inset: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;"><div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div></div>
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="h2"><img src="{% static 'assets/img/cemac/cemac.png'%}" width="40px" height="40px" /></h1>
            <div class="btn-toolbar mb-2 mb-md-0">
                <div class="cemacdiv">
            <img src="{% static 'assets/img/cemac/cmr.png'%}" class="cemaclogo" />
            <img src="{% static 'assets/img/cemac/congo.png'%}" class="cemaclogo"/>
            <img src="{% static 'assets/img/cemac/gabon.png'%}" class="cemaclogo"/>
            <img src="{% static 'assets/img/cemac/guinee.png'%}" class="cemaclogo"/>
            <img src="{% static 'assets/img/cemac/rca.png'%}" class="cemaclogo" />
            <img src="{% static 'assets/img/cemac/tchad.png'%}" class="cemaclogo"/>
            </div>
            </div>
          </div>
             <div class="c-wrapper c-fixed-components">
 
      
      <div class="c-body">
        <main class="c-main">
          <div class="container-fluid">
            <div class="fade-in">
              <div class="row">

                <div class="col-sm-12">
                  <div class="card">
                    <div class="card-header"><strong>TEC + </strong> <small> TVA + DACC + TS </small></div>
                      <div class="card-body">
                        <div class="row">
                          <div class="col-sm-12">
                          <div id="wait" class="loader" ><br><h1>Demarrage du Simulateur...</h1></div>
                            
                            
                            <table id="example" class="table table-responsive-sm table-striped table-bordered" >
                                <thead>
                                    <tr>
                                        <th>Nomenclature</th>
                                        <th>Libellé</th>
                                        <th>Quotite</th>
                                      
                                        <th>Exhonération TVA</th>
                                        <th>DACC</th>
                                        <th>T.S</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="testBody">
                                      {% for tarif in tarifs %}
                                    <tr id="{{tarif.id}}">
                                        <td>{{tarif.nomenclature}}
                                            </td>
                                        <td>{{tarif.libelleNomenclature}}</td>
                                        <td>{{tarif.quotite}}
                                        </td>
                                       
                                        <td> {{tarif.exhonereTVA}}</td>
                                        <td> {{tarif.dacc}}</td>
                                        <td> {{tarif.ts}}</td>
                                        <td><button id="{{tarif.id}}" class="btn btn-success btn-sm" onclick="javascript:simuler(this); return false;" >Ajouter <i class="fa fa-plus-circle"></i></button></td>
                                    
                                    </tr>
                                {%endfor%}
                                
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <th>Nomenclature</th>
                                        <th>Libellé</th>
                                        <th>Quotite</th>
                                      
                                        <th>Exhonération TVA</th>
                                        <th>DACC</th>
                                        <th>T.S</th>
                                        <th>Action</th>
                                    </tr>
                                </tfoot>
                            </table>
                          </div>
                        </div>
                      
                      </div>
                    </div>
                </div>
                <!-- /.col-->
               
                <!-- /.col-->
              </div>
              <!-- /.row-->
            
              <!-- /.row-->
              <br>
                  <button type="button"  class="btn btn-danger pulse" id="visualiser"data-toggle="toggle" data-target="#sim">
                      <i class="fa fa-eye"></i>
                  </button>
                  <button type="button"  class="btn btn-primary fixedroit" id="telecharger" onclick="javascript:telechargerFiche(this); return false;">
                      <i class="fa fa-download" aria-hidden="true"></i>
                  </button>
                  
              
              <!-- /.row-->

            </div>
          </div>
        </main>
        <div class="row" id="sim"  style="position:fixed;bottom:0px">
                


                <div class="col-sm-12">
                  <div class="card fast-transition">
                    <div class="card-header"><strong>SIMULATEUR</strong>
                   
                   
                     </div>
                    <div class="card-body" id="tabSimulateur">
                      <div id="ficheFinal">
                          <div class="row">
                                  <div  class="col-4" id="SimProduitId">Nomenclature:______________</div>
                            
                                  <div class="col-sm-8"  id="SimlibelleId" >Libelle:______________</div>
                          </div>
                          <hr>
                          <br>        
                          <div class="row" >
                              <div class="col-sm-6">
                                <fieldset class="form-group border p-3">
                                      <legend class="w-auto px-2">Information Générale</legend>
                                <table border="0">
                                  <tr>
                                    <td id="SimDeclarantId">Déclarant:<u style='font-size:11px;font-weight:bold'>{{user.first_name }} {{user.last_name}}</u></td>
                                    <td id="SimTransportId">Mode de Transport:__________</td>
                                  </tr>
                                  <tr>
                                    <td id="SimImporateurId">Importateur:______________</td>
                                    <td id="SimRegimeFiscaleId">Regime Fiscale:__________</td>
                                  </tr>
                                  <tr>
                                    <td id="SimProvenanceId">Provenance:______________</td>
                                    <td id="SimDestionationId">Destination:__________</td>
                                  </tr>
                                  <tr>
                                    <td id="SimDeviseId">Devise:______________</td>
                                    <td id="SimTauxChangeId">Taux de Change:__________</td>
                                  </tr>
                                
                                </table>
                                </fieldset>
                              </div>
                              <div class="col-sm-6">
                                
                                <fieldset class="form-group border p-3">
                                      <legend class="w-auto px-2">Note de Valeur Import</legend>
                               
                                <table border="0">
                                  
                                  <tr>
                                  <td id="SimValeurFactureId">Valeur Facture:______________</td>
                                   <td id="SimQuotiteId">Quotité:__________</td>
                                  </tr>
                                  <tr>
                                    
                                    <td id="SimFretNationalId">Fret National:__________</td>
                                     <td id="SimValeurStatistique">VS:______________</td>
                                  </tr>
                                  <tr>
                                    <td id="SimFretId">Fret:______________</td>
                                    <td id="SimAssuranceId">Assurance:__________</td>
                                  </tr>
                                  <tr>
                                    <td id="SimValeurImposableId">Valeur Imposable:______________</td>
                                    <td id="SimModePaiementId">Mode de Paiement:__________</td>
                                  </tr>
                                
                                </table>
                                </fieldset>
                              </div>
                          </div>
                    

                          <table class="table table-sm table-bordered table-striped">
                              <thead>
                                <tr>
                                    <th>TYPE</th>
                                    <th>BASE IMPOSITION (FCFA)</th>
                                    <th>QUOTITE</th>
                                    <th>MONTANT (FCFA)</th>
                                </tr>

                              </thead>
                              <tbody id="ficheBody">
                              <tr>
                                <td>DD</td>
                                <td id="viTd"></td>
                                <td id="ddQuotite"></td>
                                <td id="ddMontant"></td>
                              </tr>
                              <tr>
                                <td>TVA</td>
                                <td id="tvaTd"></td>
                                <td id="tvaQuotite"></td>
                                <td id="tvaMontant"></td>
                              </tr>
                              <tr>
                                <td>DACC</td>
                                <td id="daccTd"></td>
                                <td id="daccQuotite"></td>
                                <td id="daccMontant"></td>
                              </tr>
                              <tr>
                                <td>PCI</td>
                                <td id="pciTd"></td>
                                <td id="pciQuotite"></td>
                                <td id="pciMontant"></td>
                              </tr>
                              <tr>
                                <td>RST</td>
                                <td id="rstTd"></td>
                                <td id="rstQuotite"></td>
                                <td id="rstMontant"></td>
                              </tr>
                              <tr>
                                <td>TCI</td>
                                <td id="tciTd"></td>
                                <td id="tciQuotite"></td>
                                <td id="tciMontant"></td>
                              </tr>
                              <tr>
                                <td>CCI</td>
                                <td id="cciTd"></td>
                                <td id="cciQuotite"></td>
                                <td id="cciMontant"></td>
                              </tr>
                              <tr>
                                <td>TUA</td>
                                <td id="tuaTd"></td>
                                <td id="tuaQuotite"></td>
                                <td id="tuaMontant"></td>
                              </tr>
                              <tr>
                                <td>T Sp</td>
                                <td id="tspTd"></td>
                                <td id="tspQuotite"></td>
                                <td id="tspMontant"></td>
                              </tr>

                              </tbody>
                              <tfoot id="fichefoot">
                              <tr>
                                  <td colspan="3" style="align:right;font-size:20px;font-weight:bold">TOTAL DT</td>
                                  <td id="totalDt" style="font-weight:bold"></td>
                              </tr>
                              <tr>
                                  <td colspan="3" style="align:right;font-size:20px;font-weight:bold">VS</td>
                                  <td id="totalVs" style="font-weight:bold"></td>
                              </tr>
                              <tr>
                                  <td colspan="3" style="align:right;font-size:20px;font-weight:bold">HAD DU CDA</td>
                                  <td id="totalHAD" style="font-weight:bold"></td>
                              </tr>
                              <tr>
                                  <td colspan="3" style="align:right;font-size:20px;font-weight:bold">COUT DE REVIENT</td>
                                  <td id="coutRevient" style="font-weight:bold"></td>
                              </tr>

                              </tfoot>
                          
                          </table>
                          
                          <div style="float:right;margin-right:1.5em"> Fait à ___________________ le <u><span id="maDate"></span> </u></div>
                          <br>
                          <br>
                          <br>
                          <div style="float:right;margin-right:1.5em">Le Declarant</div>
                    
                      </div>
                    <!-- 
                      <div id="">   
                              <table style="display:none;"  id="logo">
                              <tr>
                              <td colspan="2">SIMULATEUR DES TAXES D'IMPORTATIONS DOUANIERES / HORS CEMAC</td>
                              </tr>
                              <tr>
                              <td width="20%"><img src="{% static 'images_cgi/LOGOCGI_r.png' %}"  alt width="150" height="150"></td>
                            
                              <td width="80%">
                                  <table width="100%" id="infoEntreprise">

                                  </table>
                                  
                                  <input type="text" id="entreprise" style="border:0px;width:100%"/><br>
                                  <input type="text" id="adresse" style="border:0px;width:100%;"/>
                              </td>
                              </tr>
                              </table>
                           <table class="table table-responsive-sm" >
                                <thead class="thead-dark">
                                    <tr>
                                        <th scope="col">Nomenclature</th>
                                        <th scope="col">Quotite</th>
                                        
                                        <th scope="col">Valeur Imposable</th>
                                        <th scope="col">DD</th>
                                        <th scope="col">TVA</th>
                                        <th scope="col">D ACC</th>
                                        <th scope="col">ACPTE</th>
                                        <th scope="col">RST</th>
                                        <th scope="col">TCI</th>
                                        <th scope="col"> CCI</th>
                                        <th scope="col"> TUA</th>
                                        <th scope="col"> TS</th>

                                    </tr>
                                </thead>
                                <tbody id="simulateur">
                                    
                                    
                                </tbody>
                            </table>
                      </div>
                 -->
                      
                      
                    </div>
                  </div>
                </div>
                <!-- /.col-->
               
                <!-- /.col-->
              </div>
      </div>
    </div>
    <!-- CoreUI and necessary plugins-->
 
    <!--<![endif]-->
 

<div class="modal fade" id="entreeModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog  modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">IDENTIFICATION DE L'IMPORTATEUR</h5>
       
      </div>
      <div class="modal-body">
          <div class="row">
                <div class="col-sm-6">  
                     <div class="card">
                        <div class="card-body">
                              <div class="form-group">
                                <label for="inputEmail3">Importateur</label>
                                <input class="form-control" id="importateurId" type="text" placeholder="Entrez la Raison sociale">
                              </div>
                              <div class="form-group">
                                <label for="inputEmail01" >Régime Fiscale </label>
                                <select class="form-control" id="regimeId">
                                {% for regime in regimes %}
                                    <option value="{{regime.regime}}">{{regime.regime}}</option>
                                {% endfor %}
                                </select> 
                                <input type="text" id="username" hidden="hidden" value="{{user.username}}"/>
                               
                              </div>
                              <div class="form-group">
                                <label for="country">Vers quel pays souhaitez-vous importer ?</label><select class="form-control" id="destinationId">
                                {% for countrie in cemacs %}
                                    <option value="{{countrie.nom}}">{{countrie.nom}}</option>
                                {% endfor %}
                                </select> 
                                <input type="text" id="tvaDestination" value="18" hidden="hidden">
                                <input type="text" id="africa" value="0" hidden="hidden">
                                <input type="text" id="cemac" value="0" hidden="hidden">
                              </div>
                              <div class="form-group">
                                <label for="country">Pays de provenance</label><select class="form-control" id="provenanceId">
                                {% for country in pays %}
                                    <option value="{{country.nom}}">{{country.nom}}</option>
                                {% endfor %}
                                </select> 
                              </div>
                        </div>
                      </div>      
                </div>
                <div class="col-sm-6">
                  <div class="card">
                    <div class="card-body">
                            
                            <div class="form-group">
                             <input type="email" class="form-control" id="nomenclatureId" placeholder="Nomenclature tarifaire" hidden="hidden">
                                <label for="inputEmail01" >Régime Douanier </label>
                                <select class="form-control" id="regimeId">
                                {% for regime in regimedouaniers %}
                                    <option value="{{regime.regime}}">{{regime.regime}}</option>
                                {% endfor %}
                                </select> 
                               
                               
                              </div>
                            <div class="form-group ">
                                <label for="inputEmail003" >Moyen de transport </label>
                                <select class="form-control" id="transportId">
                                {% for trans in transports %}
                                    <option value="{{trans.moyen}}">{{trans.moyen}}</option>
                                {% endfor %}
                                </select> 
                              
                            </div>
                            <div class="form-group ">
                                <label for="inputEmail03" >Mode de paiement </label>
                                 <select class="form-control" id="paiementId">
                                {% for mode in paiements %}
                                    <option value="{{mode.mode}}">{{mode.mode}}</option>
                                {% endfor %}
                                </select>    
                            </div>
                            <div class="form-group ">
                                <label for="deviseId" >Devise </label>
                                <select class="form-control" id="deviseId">
                                {% for dev in devises %}
                                    <option value="{{dev.codeDevise}}">{{dev.nomDevise}}-{{dev.codeDevise}}</option>
                                {% endfor %}
                                </select> 
                                  
                            </div>
                    </div>
                  </div>
                </div> 
          </div>
      </div>
          <div class="modal-footer">
            
            <button type="button" class="btn btn-primary" id="memoriser" onclick="javascript:debuterSimulation(this); return false;"><i class="fa fa-save"></i> Enregistrer et commencer la simulation</button>
            <a  class="btn btn-danger" href="/sdi" id="annuler" ><i class="fa fa-close"></i> Annuler et Retourner à l'accueil</a>
          </div>
        </div>
        </div>
      </div>
              
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Veuillez remplir ce formulaire</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body"><form id="ajoutForm" class="form-control">
      <div class="row">
          <div class="col-sm-6">
             
                        <div class="form-group">
                            <label for="idproduit" >Nomenclature Produit</label>
                            <input type="text" class="form-control" id="idproduit" value="" disabled>
                            <input type="text" class="form-control" id="idproduit2" value="" hidden="hidden">
                        </div>
                        <div class="form-group">
                            <label for="valeurFacture" >Valeur Facture</label>
                            <input type="text" class="form-control" id="valeurFacture" placeholder="Valeur Facture" value="0" onBlur="javascript:ajusterValeur(this); return false;">
                        </div>
                        <div class="form-group">
                            <label for="fret" >Fret</label>
                            <input type="text" class="form-control" id="fret" placeholder="Fret" value="0" onBlur="javascript:ajusterValeur(this); return false;">
                        </div>
                        <div class="form-group">
                            <label for="assurance" >Assurance</label>
                            <input type="text" class="form-control" id="assurance" placeholder="Assurance" value="0" onBlur="javascript:ajusterValeur(this); return false;">
                  
                      </div>
                        
                       
                     
        
          </div>
          <div class="col-sm-6">
                        <div class="form-group">
                            <label for="idproduit" >Libelle Produit</label>
                            <input type="text" class="form-control" id="idlibelle" value="" disabled>
                            
                        </div>
                      <div class="form-group ">
                        <label for="valImposable" >Valeur Imposable</label>
                          <input type="text" class="form-control" id="valImposable" placeholder="Valeur Imposable" disabled>
                        </div>
                      <div class="form-group ">
                          <label for="fretNational" >Fret national</label>
                          <input type="text" class="form-control" id="fretNational"  value="0" placeholder="Fret national" onBlur="javascript:ajusterValeur(this); return false;">
                      </div>
                       <div class="form-group">
                            <label for="statistique" >Valeur Statistique</label>
                            <input type="text" class="form-control" id="statistique" placeholder="statistique" disabled>
                      </div>
         
      </div> </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-primary" id="ajoutSimulateur" onclick="javascript:ajouterLigneSimulateur(this); return false;"><i class="fa fa-microchip"></i> Ajouter au Simulateur </button>
      </div>
    </div>
  </div>
</div>
         
         
        </main>
      </div>
    </div>
  <br>
    <br>
    <br>
   <footer id="dk-footer" class="dk-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-12 col-lg-4">
                    <div class="dk-footer-box-info">
                        <a href="index.html" class="footer-logo">
                            <img src="{%static 'assets/img/cemac/cemac.png'%}" alt="footer_logo" class="img-fluid " style="align:center">
                        </a>
                        <p class="footer-info-text">
                           Ce simultateur permet à tous les importateurs de pouvoir vérifier par eux-même les taxes et droits de douane pour leurs marchandises dans la zone CEMAC
                        </p>
                        <div class="footer-social-link">
                            <h3>Réalisé par</h3>
                             <img src="{%static 'images_cgi/lecfp.png'%}"/>
                        </div>
                        <!-- End Social link -->
                    </div>
                    <!-- End Footer info -->
                   
                </div>
                <!-- End Col -->
                <div class="col-md-12 col-lg-8">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="contact-us">
                                <div class="contact-icon">
                                    <i class="fa fa-map-o" aria-hidden="true"></i>
                                </div>
                                <!-- End contact Icon -->
                                <div class="contact-info">
                                    <h3>Contact</h3>
                                    <p><i class="fa fa-envelope-square"></i> contact@cgitchad.online</p>
                                </div>
                                <!-- End Contact Info -->
                            </div>
                            <!-- End Contact Us -->
                        </div>
                        <!-- End Col -->
                        <div class="col-md-6">
                            <div class="contact-us contact-us-last">
                                <div class="contact-icon">
                                    <i class="fa fa-volume-control-phone" aria-hidden="true"></i>
                                </div>
                                <!-- End contact Icon -->
                                <div class="contact-info">
                                    <h3>+237 242 998 232  </h3>
                                    <p><i class="fa fa-phone"></i>Assistance Technique</p>
                                </div>
                                <!-- End Contact Info -->
                            </div>
                            <!-- End Contact Us -->
                        </div>
                        <!-- End Col -->
                    </div>
                    <!-- End Contact Row -->
                    <div class="row">
                        <div class="col-md-12 col-lg-6">
                            <div class="footer-widget footer-left-widget">
                                <div class="section-heading">
                                    <h3>Liens Utiles</h3>
                                    <span class="animate-border border-black"></span>
                                </div>
                                <ul>
                                    <li>
                                        <a href="#">Le CFP</a>
                                    </li>
                                    <li>
                                        <a href="#">CGI TCHAD</a>
                                    </li>
                                    <li>
                                        <a href="#">CEMAC</a>
                                    </li>
                                   
                                </ul>
                                <ul>
                                    <li>
                                        <a href="#">Contact</a>
                                    </li>
                                  
                                    <li>
                                        <a href="#">Faq</a>
                                    </li>
                                </ul>
                            </div>
                            <!-- End Footer Widget -->
                        </div>
                        <!-- End col -->
                        <div class="col-md-12 col-lg-6">
                            <div class="footer-widget">
                                <div class="section-heading">
                                    <h3>Note d'information</h3>
                                    <span class="animate-border border-black"></span>
                                </div>
                                <p><!-- Don’t miss to subscribe to our new feeds, kindly fill the form below. -->
                                 Les données fournies par le simultateur sont juste à titre indicatifs et peuvent donc différer 
                                 de celles délivrées par l'autorité compétente</p>
                               
                                <!-- End form -->
                            </div>
                            <!-- End footer widget -->
                        </div>
                        <!-- End Col -->
                    </div>
                    <!-- End Row -->
                </div>
                <!-- End Col -->
            </div>
            <!-- End Widget Row -->
        </div>
        <!-- End Contact Container -->


        <div class="copyright">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <span>Copyright © 2021 <a href="http://www.lecfp.net">Le CFP </a>, Powered by <a href="https://www.pharmony-corporation.com">Pharmony Coporation</a></span>
                    </div>
                    <!-- End Col -->
                    <div class="col-md-6">
                        <div class="copyright-menu">
                            <ul>
                                <li>
                                    <a href="/sdi">Accueil</a>
                                </li>
                                <li>
                                    <a href="{% url 'up_profile'%}">Profil</a>
                                </li>
                                <li>
                                    <a href="{% url 'tarification'%}">Nouvelle Simulation</a>
                                </li>
                                
                            </ul>
                        </div>
                    </div>
                    <!-- End col -->
                </div>
                <!-- End Row -->
            </div>
            <!-- End Copyright Container -->
        </div>
        <!-- End Copyright -->
        <!-- Back to top -->
        <div id="back-to-top" class="back-to-top">
            <button class="btn btn-dark" title="Back to Top" style="display: block;">
                <i class="fa fa-angle-up"></i>
            </button>
        </div>
        <!-- End Back to top -->
</footer>

 
    <script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.23/b-1.6.5/b-colvis-1.6.5/b-html5-1.6.5/r-2.2.7/datatables.min.js"></script>
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  
    <script src="https://kendo.cdn.telerik.com/2017.2.621/js/jszip.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2017.2.621/js/kendo.all.min.js"></script>
    
    <script>
        jQuery(window).load(function(){ jQuery(".loader").fadeOut("200"); });
    </script>
    <script type="text/javascript">


    var today = new Date();

    var madate = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
    ydate = document.getElementById("maDate");
    ydate.innerHTML = madate; 
    var telechargerFiche = function(link){
      kendo.drawing
              .drawDOM("#tabSimulateur", 
              { 
                  paperSize: "A4",
                  margin: { top: "1cm", left:"0.2cm", right:"0.2cm", bottom: "1cm" },
                  scale: 0.8,
                  height: 500
              })
              .then(function(group){
              kendo.drawing.pdf.saveAs(group, "simulateur.pdf")
              });
        }

    var debuterSimulation = function(link){

         let nomenclature = $("#nomenclatureId").val();
         let regime = $("#regimeId").val();
         let username = $("#username").val();
         let provenance = $("#provenanceId").val();
         let destination = $("#destinationId").val();
         let importateur = $("#importateurId").val();
         let devise = $("#deviseId").val();
         let paiement = $("#paiementId").val();
         let transport = $("#transportId").val();

         if(importateur != ""){
            $.ajax({
                url: "{% url 'demarrerSimulateur' %}",
                method:"POST",
                data: {
                  'regime':regime,
                  'username':username,
                  'nomenclature':nomenclature,
                  'provenance':provenance,
                  'destination':destination,
                  'importateur':importateur,
                  'devise':devise,
                  'paiement':paiement,
                  'transport':transport,
                  'csrfmiddlewaretoken': '{{ csrf_token }}',
                },
                dataType: 'json',
                success: function (data) {

                  if(data['success']){
                    $("#entreeModal").modal('hide');
                    alert("enregistrement effectué, debut de la simulation");
                    rtva=document.getElementById("tvaDestination");
                   
                    rtva.setAttribute("value",data['tva']);
                    
                    africa = document.getElementById("africa");
                     cemac = document.getElementById("cemac");
                    if(data['cemac']){
                         
                          cemac.setAttribute("value",1);
                          africa.setAttribute("value",1)
                    }else{
                      if(data['africa']){
                          cemac.setAttribute("value",0);
                          africa.setAttribute("value",1);
                      }else{
                          cemac.setAttribute("value",0);
                          africa.setAttribute("value",0);

                      }
                    }
                  }else{
                    alert("une erreur s'est produite lors de l'enregistrement des données");
                  }

                }                
                 });
        
         }else{
           alert("Veuillez renseigner le champs importateur");
         }
          
           
      }



    $("[data-toggle='toggle']").click(function() {
    var selector = $(this).data("target");
    $(selector).toggleClass('in');
});
$('#example').DataTable( { 
                        responsive:'true',
                            language: {
                              url: 'https://cdn.datatables.net/plug-ins/1.10.24/i18n/French.json'
                          }
                      });
    $(window).on('load',function(){
     //$("#wait").css("display", "block");
      $("#entreeModal").modal({
        backdrop:'static',
        keyboard:false,
        show:true
      });
      
        var te = 1
        /*
           $.ajax({
                url: "{% url 'gettarifs' %}",
                data: {
                  'te':te,
                },
                dataType: 'json',
                success: function (data) {
                  
                  //alert("test");
                   tbody = document.getElementById("testBody");
                     
                  for(let i=0; i<data.length; i++){
                      tr = document.createElement('tr');
                      tr.setAttribute("id",data[i].id);
                      tdnom = document.createElement('td');
                      tdnom.innerHTML = data[i].nomenclature;
                      tr.appendChild(tdnom);
                      tdLibelle = document.createElement('td');
                      tdLibelle.innerHTML = data[i].libelleNomenclature;
                      tr.appendChild(tdLibelle);
                      tdquotite = document.createElement('td');
                      tdquotite.innerHTML = data[i].quotite;
                      tr.appendChild(tdquotite);
                      tduniteStatistique = document.createElement('td');
                      tduniteStatistique.innerHTML = data[i].uniteStatistique;
                      tr.appendChild(tduniteStatistique);
                      tdtva= document.createElement('td');
                      tdtva.innerHTML = data[i].tva;
                      tr.appendChild(tdtva);
                      tddacc= document.createElement('td');
                      tddacc.innerHTML = data[i].dacc;
                      tr.appendChild(tddacc);
                      tdts= document.createElement('td');
                      tdts.innerHTML = data[i].ts;
                      tr.appendChild(tdts);
                      tdbutton= document.createElement('td');
                      button = document.createElement('button');
                      button.setAttribute("id",data[i].id);
                      button.setAttribute("class","btn btn-success btn-sm");
                      button.setAttribute("onclick","javascript:ajouterLigneSimulateur(this); return false;");
                      button.innerHTML = "Ajouter"
                      tdbutton.appendChild(button);
                      tr.appendChild(tdbutton);

                      tbody.appendChild(tr); 
                   }
                     

                   //$("#wait").css("display", "none");
                   
                }});*/

                  /*
                                    {% for tarif in tarifs %}
                                    <tr id="{{tarif.id}}">
                                        <td>{{tarif.nomenclature}}
                                            </td>
                                        <td>{{tarif.libelleNomenclature}}</td>
                                        <td>{{tarif.quotite}}
                                        </td>
                                        <td> {{tarif.uniteStatistique}}</td>
                                        <td> {{tarif.exhonereTVA}}</td>
                                        <td> {{tarif.dacc}}</td>
                                        <td> {{tarif.ts}}</td>
                                        <td><button id="{{tarif.id}}" onclick="javascript:ajouterLigneSimulateur(this); return false;" >Ajouter</button></td>
                                    
                                    </tr>
                                {%endfor%}*/
                  //  $('#myModal').modal('show');<br>
    });
 
</script>
    <script>

        var nbclick  = 0;
        var tabId = [];

        var ajusterValeur = function(link){
          let assurance = parseInt($('#assurance').val()) ;
          let  valeurFacture = parseInt($('#valeurFacture').val());
          let fretNational = parseInt($('#fretNational').val());
          let fret = parseInt($('#fret').val());

         
          let vi = document.getElementById("valImposable");
          let calVi = assurance + fret + valeurFacture;
          vi.setAttribute("value",calVi);
          let viValue = $("#statistique").val();
          let vs = document.getElementById("statistique");
          vs.setAttribute("value",calVi+fretNational);
        }   
     
        var ajoutIdentite =  function(link){
            if(nbclick >= 1){
                    $("#exampleModal").modal().show();
            }else{
                alert("veuillez ajouter un élément au panier");
            }
             
        }

        
        var genereFacture = function (link){
            if ($("#inputEmail3").val() != "" && $("#inputPassword3").val() != "")
            {
                let bloc =  document.getElementById("infoEntreprise");
                tr1 = document.createElement('tr');
                td1=document.createElement('td');
                td1.innerHTML = "Importateur : " + $("#inputEmail3").val();
                td2=document.createElement('td');
                td2.innerHTML = "Regime Fiscal:" + $("#inputEmail01").val();
                tr1.appendChild(td1);
                tr1.appendChild(td2);
                bloc.appendChild(tr1);

                tr2 = document.createElement('tr');
                td11=document.createElement('td');
                td11.innerHTML=" Nomenclature Tarifaire :"+ $("#inputEmail02").val();
                td22=document.createElement('td');
                td22.innerHTML =" Moyen de transport :"+ $("#inputEmail003").val();
                tr2.appendChild(td11);
                tr2.appendChild(td22);
                bloc.appendChild(tr2);

                tr3 = document.createElement('tr');
                td13 =document.createElement('td');
                td13.innerHTML = " Mode de paiement :"+$("#inputEmail03").val();
                td23 =document.createElement('td');
                td23.innerHTML = " Email :" + $("#inputPassword3").val();
                tr3.appendChild(td13);
                tr3.appendChild(td23);
                bloc.appendChild(tr3)

                 // entre = document.getElementById("entreprise").setAttribute("value",$("#inputEmail3").val())
                // adresse = document.getElementById("adresse").setAttribute("value",$("#inputPassword3").val())
                tableau = document.getElementById("logo");
                tableau.setAttribute("style","display:show");

                $("#exampleModal").modal('hide');
                        let mesTaxes =[] ;
                        let mesTva =0 ;
                        let mesRST =0;
                        let mesCCI =0;
                        let mesTCI =0;
                        let mesTUA =0;
                        let acc =0;
                        let acptes =0;
                        let somme = 0;
                        let tabTVA = [];
                        for (let i = 0 ; i<tabId.length; i++){
                            mesTaxes[i] = parseFloat(document.getElementById("taxes-"+tabId[i]).value);
                            somme += mesTaxes[i];
                            mesTva += parseFloat(document.getElementById("Tva-"+tabId[i]).value);
                            somme += parseFloat(document.getElementById("Tva-"+tabId[i]).value);
                            mesRST += parseFloat(document.getElementById("Rst-"+tabId[i]).value);
                            somme += parseFloat(document.getElementById("Rst-"+tabId[i]).value);
                            mesCCI += parseFloat(document.getElementById("Cci-"+tabId[i]).value);
                            somme += parseFloat(document.getElementById("Cci-"+tabId[i]).value);
                            mesTCI +=parseFloat(document.getElementById("Tci-"+tabId[i]).value);
                            somme += parseFloat(document.getElementById("Tci-"+tabId[i]).value);
                            mesTUA += parseFloat(document.getElementById("Tua-"+tabId[i]).value);
                            somme += parseFloat(document.getElementById("Tua-"+tabId[i]).value);
                            acptes += parseFloat(document.getElementById("Acpte-"+tabId[i]).value);
                            somme += parseFloat(document.getElementById("Acpte-"+tabId[i]).value);
                            acc += parseFloat(document.getElementById("Dacc-"+tabId[i]).value);
                            somme += parseFloat(document.getElementById("Dacc-"+tabId[i]).value);
                            //console.log("valeur : "+i, somme);

                        }
                        let total = parseFloat(somme);

                        body = document.getElementById("simulateur");
                            tr1 = document.createElement('tr');
                            tr1.setAttribute("id","totalTVA");
                            tdcol1 = document.createElement('td');
                            tdcol1.setAttribute("colspan","4");
                            tdcol1.innerHTML = "TOTAL TVA";

                            tr1.appendChild(tdcol1);
                            tdcol2 = document.createElement('td');
                            tdcol2.setAttribute("colspan","8");
                            tdcol2.innerHTML = mesTva;
                            tr1.appendChild(tdcol2);

                            tr3 = document.createElement('tr');
                            tr3.setAttribute("id","totaldacc");
                            tdcol3 = document.createElement('td');
                            tdcol3.setAttribute("colspan","5");
                            tdcol3.innerHTML = "TOTAL DACC";

                            tr3.appendChild(tdcol3);
                            tdcol23 = document.createElement('td');
                            tdcol23.setAttribute("colspan","7");
                            tdcol23.innerHTML = acc;
                            tr3.appendChild(tdcol23);

                            tr = document.createElement('tr');
                            tr.setAttribute("id","total");
                            tdcol11 = document.createElement('td');
                            tdcol11.setAttribute("colspan","11");
                            tdcol11.innerHTML = "TOTAL";

                            tr.appendChild(tdcol11);
                            tdcol22 = document.createElement('td');
                            tdcol22.innerHTML = "<b style='font-size:20px'>"+total+"</b>";
                            tr.appendChild(tdcol22);

                        body.appendChild(tr1);
                        body.appendChild(tr3);
                        body.appendChild(tr);

                        kendo.drawing
                            .drawDOM("#tabSimulateur", 
                            { 
                                paperSize: "A4",
                                orientation:"horizontal",landscape: true,
                                margin: { top: "1cm", left:"0.2cm", right:"0.2cm", bottom: "1cm" },
                                scale: 0.8,
                                height: 500
                            })
                            .then(function(group){
                            kendo.drawing.pdf.saveAs(group, "simulateur.pdf")
                            });

            }else{
                alert("veuillez remplir tous les champs");
            }
           
            //alert(somme);
        }
        var calculeTaxe = function (link){
            var row = link.parentNode.parentNode;
			var table = row.parentNode;
			var id = row.getAttribute('id');
            var donnee = id.split("-");
            let pa = document.getElementById("pa-"+donnee[1]).value 
            let quotite = document.getElementById("quotite-"+donnee[1]).value 
            //let quantite = document.getElementById("quantite-"+donnee[1]).value 
            let taxesInput = document.getElementById("taxes-"+donnee[1]);
            let tvaInput = document.getElementById("Tva-"+donnee[1]);
            let daccInput = document.getElementById("Dacc-"+donnee[1]);
            let Tciinput = document.getElementById("Tci-"+donnee[1]);
            let Tuainput = document.getElementById("Tua-"+donnee[1]);
            let CCIinput = document.getElementById("Cci-"+donnee[1]);
            let RSTinput = document.getElementById("Rst-"+donnee[1]);
            let Acpteinput = document.getElementById("Acpte-"+donnee[1]);  
            //alert(Acpteinput.getAttribute("id"));     
            let tsInput = document.getElementById("Ts-"+donnee[1]);
            let tsInputValue = tsInput.value
            
            let A = parseInt(pa);
            let B = parseInt(A*quotite)/100;
            //tva
            let valeurTVA =  parseFloat(document.getElementById("paysTva").value);
            //alert(valeurTVA);
            let assujetieTVA =  parseInt(document.getElementById("Tva2-"+donnee[1]).value);
            let daccQuotite =  parseInt(document.getElementById("Dacc2-"+donnee[1]).value);
            //alert(assujetieTVA);

            let C= parseFloat(assujetieTVA*(A+B)*valeurTVA/100);
            let D = parseFloat((A+C)*daccQuotite/100);
            let AC4 = parseFloat(((A+B)*4)/100);
            let RST =parseFloat(A*2/100) ;
            let TCI = parseFloat(A/100) ; 
            let CCI = parseFloat(A*0.4/100) ;
            let TUA = parseFloat(A*0.2/100);
            let TS = parseFloat(A*parseInt(tsInputValue));
            //alert(AC4);
            Acpteinput.setAttribute("value",AC4);
            tvaInput.setAttribute("value",C);
            daccInput.setAttribute("value",D);
            taxesInput.setAttribute("value",B);
            Tciinput.setAttribute("value",TCI);
            Tuainput.setAttribute("value",TUA);
            CCIinput.setAttribute("value",CCI);
            RSTinput.setAttribute("value",RST);
            tsInput.setAttribute("value",TS);
            
        }
        var simuler = function(link){
            var row = link;
            var table = row.parentNode;
            tarifId = row.getAttribute("id");
            $("#exampleModal").modal().show();
            $.ajax({
                url: "{% url 'ajax_gettarif' %}",
                data: {
                'id': tarifId
                },
                dataType: 'json',
                success: function (data) {
                  tarif = document.getElementById("idproduit2");
                  tarif.setAttribute("value",tarifId);
                  ib = document.getElementById("idproduit");
                  ib.setAttribute("value",data.tarif.nomenclature);
                  ilibelle = document.getElementById("idlibelle");
                  ilibelle.setAttribute("value",data.tarif.libelleNomenclature);
                   
                }
                });
        }
        var ajouterLigneSimulateur = function (link) {

            var tauxDeChange = 1;
            let fret = $("#fret").val();
            let fretNational = $("#fretNational").val();
            let valImposable = $("#valImposable").val();
            let valeurFacture = $("#valeurFacture").val();
            let assurance = $("#assurance").val();
            let tarifId = $("#idproduit2").val();
            let statistique = $("#statistique").val();
            let libelle = $("#idlibelle").val();
            let devise = $("#deviseId").val();
            $("#visualiser").css("display","block");
            $("#telecharger").css("display","block");

                const formatage = new Intl.NumberFormat('fr-FR', {
                      style: 'currency',
                      currency: devise,
                      minimumFractionDigits: 2
                    });
              
             
              let nomenclature = $("#nomenclatureId").val();
              let regime = $("#regimeId").val();
              let  regimeF = document.getElementById("SimRegimeFiscaleId");
              regimeF.innerHTML = "Regime Fiscale:<u style='font-size:11px;font-weight:bold'>"+regime+"</u>";
              
              let provenance = $("#provenanceId").val();
              let provenanceSim = document.getElementById("SimProvenanceId");
              provenanceSim.innerHTML = "Provenance : <u style='font-size:11px;font-weight:bold'>"+provenance+"</u>";
              
              let destination = $("#destinationId").val();
              let destinationSim = document.getElementById("SimDestionationId");
              destinationSim.innerHTML = "Destination : <u style='font-size:11px;font-weight:bold'>"+destination+"</u>";
              
              let importateur = $("#importateurId").val();
              let importateurSim = document.getElementById("SimImporateurId");
              importateurSim.innerHTML = "Importateur : <u style='font-size:11px;font-weight:bold'>"+importateur+"</u>";
              
              
              let deviseSim = document.getElementById("SimDeviseId");
              deviseSim.innerHTML = "Devise : <u style='font-size:11px;font-weight:bold'>"+devise+"</u>";
              
              let transport = $("#transportId").val();
              let simTransportId = document.getElementById("SimTransportId");
              simTransportId.innerHTML = "Transport : <u style='font-size:11px;font-weight:bold'>"+transport+"</u>";
            
              let produit = $("#idproduit").val();
              let simProduitId = document.getElementById("SimProduitId");
              simProduitId.innerHTML = "Produit : <u style='font-size:11px;font-weight:bold'>"+produit+"</u>";
              
              let facture = $("#valeurFacture").val();
              let simValeurFactureId = document.getElementById("SimValeurFactureId");
              simValeurFactureId.innerHTML = "Valeur Facture : <u style='font-size:11px;font-weight:bold'>"+formatage.format(facture)+"</u>";
              
              //let fretNational = $("#fretNational").val();
              let simFretNationalId = document.getElementById("SimFretNationalId");
              simFretNationalId.innerHTML = "Fret National : <u style='font-size:11px;font-weight:bold'>"+formatage.format(fretNational)+"</u>";
              
              
              //let SimValeurStatistique = $("#SimValeurStatistique").val();
              let simValeurStatistique = document.getElementById("SimValeurStatistique");
              simValeurStatistique.innerHTML = "Valeur Statistique : <u style='font-size:11px;font-weight:bold'>"+formatage.format(statistique)+"</u>";
              
              //let SimValeurStatistique = $("#SimValeurStatistique").val();
              let simlibelleId = document.getElementById("SimlibelleId");
              SimlibelleId.innerHTML = "Libelle : <u style='font-size:11px;font-weight:bold'>"+libelle+"</u>";

              let simTauxChangeId = document.getElementById("SimTauxChangeId");
              var url = "https://free.currconv.com/api/v7/convert?q="+devise+"_"+"XAF&compact=ultra&apiKey=12e09af230c6cd4646dd"
              var tauxRetourner = 1
               $.ajax({
                    type: "GET",
                    async: false,
                    url: url,
                     success: function(response){
                        tauxRetourner = parseFloat(response[devise+"_XAF"]);
                        simTauxChangeId.innerHTML = "Taux de Change : <u style='font-size:11px;font-weight:bold'>"+tauxRetourner+"</u>";
              
                    },
                });
              /*$.get({url,async: false}).done(function() {
                tauxRetourner = parseFloat(response[devise+"_XAF"]);
                })
                .fail(function(response) {
                  //alert( response );
                  console.log(response)
                })
                .always(function(response) {
                  console.log(response);
                  tauxRetourner = parseFloat(response[devise+"_XAF"]);
                  simTauxChangeId.innerHTML = "Taux de Change : <u style='font-size:11px;font-weight:bold'>"+tauxRetourner+"</u>";
             
                });*/
              
              //let fret = $("#fret").val();
              let simFretId = document.getElementById("SimFretId");
              simFretId.innerHTML = "Fret : <u style='font-size:11px;font-weight:bold'>"+formatage.format(fret)+"</u>";
              
              //let assurance = $("#assurance").val();
              let simAssuranceId = document.getElementById("SimAssuranceId");
              simAssuranceId.innerHTML = "Assurance : <u style='font-size:11px;font-weight:bold'>"+formatage.format(assurance)+"</u>";
              
              let vi = $("#valImposable").val();
              let simValeurImposableId = document.getElementById("SimValeurImposableId");
              simValeurImposableId.innerHTML = "Valeur Imposable : <u style='font-size:11px;font-weight:bold'>"+formatage.format(vi)+"</u>";
              
              let paiement = $("#paiementId").val();
              let simModePaiementId = document.getElementById("SimModePaiementId");
              simModePaiementId.innerHTML = "Mode de Paiement : <u style='font-size:11px;font-weight:bold'>"+paiement+"</u>";

                   $("#exampleModal").modal('hide');
                   $("#ajoutForm")[0].reset();

                   $.ajax({
                    url: "{% url 'ajax_gettarif' %}",
                    data: {
                    'id': tarifId
                    },
                    dataType: 'json',
                    success: function (data) {

                     //ligne DD

                     //let assurance = $("#assurance").val();
                     const cfa = new Intl.NumberFormat('fr-FR', {
                      style: 'currency',
                      currency: 'XAF',
                      minimumFractionDigits: 2
                    });
                    let simQuotiteId = document.getElementById("SimQuotiteId");
                    simQuotiteId.innerHTML = "Quotite : <u style='font-size:11px;font-weight:bold'>"+data.tarif.quotite+"% </u>";
                     
                     //debut controle cemac afric monde
                     if(parseInt($("#cemac").val()) == 1)
                    {
                    let VI = parseFloat(vi)*tauxRetourner;
                    let viTd =  document.getElementById("viTd");
                    viTd.innerHTML = VI;
                    
                    let ddQuotite =  document.getElementById("ddQuotite");
                    ddQuotite.innerHTML = "origine CEMAC";

                    let ddMontant =  document.getElementById("ddMontant");
                    let DD = VI*parseFloat(0)/100;
                    ddMontant.innerHTML = DD;

                    //ligne TVA
                    let tvaTd =  document.getElementById("tvaTd");
                    tvaTd.innerHTML = VI+DD ;
                    
                    let tvaIndice = parseFloat($("#tvaDestination").val());
                    let tvaQuotite =  document.getElementById("tvaQuotite");
                    tvaQuotite.innerHTML = $("#tvaDestination").val()+"%";

                    let tvaMontant =  document.getElementById("tvaMontant");
                    let TVA = parseInt(data.tarif.tva)*(parseFloat(tvaIndice)/100)*(VI+DD)
                    tvaMontant.innerHTML = TVA;
                    
                    //ligne DACC
                    let daccTd =  document.getElementById("daccTd");
                    daccTd.innerHTML = VI+DD+TVA;
                    
                   
                    let daccQuotite =  document.getElementById("daccQuotite");
                    daccQuotite.innerHTML = data.tarif.dacc+"%";

                    let daccMontant =  document.getElementById("daccMontant");
                    let DACC = parseFloat(data.tarif.dacc)*(VI+DD+TVA)/100;
                    daccMontant.innerHTML = DACC;

                    //ligne PCI
                    let pciTd =  document.getElementById("pciTd");
                    pciTd.innerHTML = VI;
                    
                   
                    let pciQuotite =  document.getElementById("pciQuotite");
                    pciQuotite.innerHTML = 4+"%";

                    let pciMontant =  document.getElementById("pciMontant");
                    let PCI = 4*(VI)/100;
                    pciMontant.innerHTML = PCI;

                    //ligne RST
                    let rstTd =  document.getElementById("rstTd");
                    rstTd.innerHTML = VI;
                    
                   
                    let rstQuotite =  document.getElementById("rstQuotite");
                    rstQuotite.innerHTML = 2+"%";

                    let rstMontant =  document.getElementById("rstMontant");
                    let RST = 2*(VI)/100;
                    rstMontant.innerHTML = RST;
                    
                    //ligne TCI
                    let tciTd =  document.getElementById("tciTd");
                    tciTd.innerHTML = VI;
                    
                   
                    let tciQuotite =  document.getElementById("tciQuotite");
                    tciQuotite.innerHTML = "origine CEMAC";

                    let tciMontant =  document.getElementById("tciMontant");
                    let TCI = 0;
                    tciMontant.innerHTML = TCI;

                    //ligne CCI
                    let cciTd =  document.getElementById("cciTd");
                    cciTd.innerHTML = VI;
                    
                   
                    let cciQuotite =  document.getElementById("cciQuotite");
                    cciQuotite.innerHTML = "origine CEMAC";

                    let cciMontant =  document.getElementById("cciMontant");
                    let CCI = 0;
                    cciMontant.innerHTML = CCI;

                    //ligne TUA
                    let tuaTd =  document.getElementById("tuaTd");
                    tuaTd.innerHTML = VI;
                    
                   
                    let tuaQuotite =  document.getElementById("tuaQuotite");
                    tuaQuotite.innerHTML = "origine Afrique";

                    let tuaMontant =  document.getElementById("tuaMontant");
                    let TUA = 0;
                    tuaMontant.innerHTML = TUA;
                    
                    //ligne TSP
                    let tspTd =  document.getElementById("tspTd");
                    tspTd.innerHTML = VI;
                    
                   
                    let tspQuotite =  document.getElementById("tspQuotite");
                    tspQuotite.innerHTML = data.tarif.ts+"%";

                    let tspMontant =  document.getElementById("tspMontant");
                    let TSP = data.tarif.ts*VI/100;
                    tspMontant.innerHTML = TSP;

                    let totalDt =  document.getElementById("totalDt");
                     dot = TSP+TUA+CCI+TCI+RST+PCI+DACC+TVA+DD;
                    totalDt.innerHTML = cfa.format(dot);

                    let totalVs =  document.getElementById("totalVs");
                    
                    totalVs.innerHTML = cfa.format(tauxRetourner*statistique);

                    let totalHAD =  document.getElementById("totalHAD");
                    had = (0.5/100)*VI
                    totalHAD.innerHTML = cfa.format(had);

                    let coutRevient =  document.getElementById("coutRevient");
                    
                    
                    
                  coutRevient.innerHTML = cfa.format(tauxRetourner*statistique-(TVA+PCI)+dot+had);
                    

                    }else{
                      if(parseInt($("#africa").val())== 1){
                        let VI = parseFloat(vi)*tauxRetourner;
                    let viTd =  document.getElementById("viTd");
                    viTd.innerHTML = VI;
                    
                    let ddQuotite =  document.getElementById("ddQuotite");
                    ddQuotite.innerHTML = data.tarif.quotite+"%";

                    let ddMontant =  document.getElementById("ddMontant");
                    let DD = VI*parseFloat(data.tarif.quotite)/100;
                    ddMontant.innerHTML = DD;

                    //ligne TVA
                    let tvaTd =  document.getElementById("tvaTd");
                    tvaTd.innerHTML = VI+DD ;
                    
                    let tvaIndice = parseFloat($("#tvaDestination").val());
                    let tvaQuotite =  document.getElementById("tvaQuotite");
                    tvaQuotite.innerHTML = $("#tvaDestination").val()+"%";

                    let tvaMontant =  document.getElementById("tvaMontant");
                    let TVA = parseInt(data.tarif.tva)*(parseFloat(tvaIndice)/100)*(VI+DD)
                    tvaMontant.innerHTML = TVA;
                    
                    //ligne DACC
                    let daccTd =  document.getElementById("daccTd");
                    daccTd.innerHTML = VI+DD+TVA;
                    
                   
                    let daccQuotite =  document.getElementById("daccQuotite");
                    daccQuotite.innerHTML = data.tarif.dacc+"%";

                    let daccMontant =  document.getElementById("daccMontant");
                    let DACC = parseFloat(data.tarif.dacc)*(VI+DD+TVA)/100;
                    daccMontant.innerHTML = DACC;

                    //ligne PCI
                    let pciTd =  document.getElementById("pciTd");
                    pciTd.innerHTML = VI;
                    
                   
                    let pciQuotite =  document.getElementById("pciQuotite");
                    pciQuotite.innerHTML = 4+"%";

                    let pciMontant =  document.getElementById("pciMontant");
                    let PCI = 4*(VI)/100;
                    pciMontant.innerHTML = PCI;

                    //ligne RST
                    let rstTd =  document.getElementById("rstTd");
                    rstTd.innerHTML = VI;
                    
                   
                    let rstQuotite =  document.getElementById("rstQuotite");
                    rstQuotite.innerHTML = 2+"%";

                    let rstMontant =  document.getElementById("rstMontant");
                    let RST = 2*(VI)/100;
                    rstMontant.innerHTML = RST;
                    
                    //ligne TCI
                    let tciTd =  document.getElementById("tciTd");
                    tciTd.innerHTML = VI;
                    
                   
                    let tciQuotite =  document.getElementById("tciQuotite");
                    tciQuotite.innerHTML = 1+"%";

                    let tciMontant =  document.getElementById("tciMontant");
                    let TCI = VI/100;
                    tciMontant.innerHTML = TCI;

                    //ligne CCI
                    let cciTd =  document.getElementById("cciTd");
                    cciTd.innerHTML = VI;
                    
                   
                    let cciQuotite =  document.getElementById("cciQuotite");
                    cciQuotite.innerHTML = "0,40 %";

                    let cciMontant =  document.getElementById("cciMontant");
                    let CCI = 0.4*VI/100;
                    cciMontant.innerHTML = CCI;

                    //ligne TUA
                    let tuaTd =  document.getElementById("tuaTd");
                    tuaTd.innerHTML = VI;
                    
                   
                    let tuaQuotite =  document.getElementById("tuaQuotite");
                    tuaQuotite.innerHTML = "origine Afrique";

                    let tuaMontant =  document.getElementById("tuaMontant");
                    let TUA = 0;
                    tuaMontant.innerHTML = TUA;
                    
                    //ligne TSP
                    let tspTd =  document.getElementById("tspTd");
                    tspTd.innerHTML = VI;
                    
                   
                    let tspQuotite =  document.getElementById("tspQuotite");
                    tspQuotite.innerHTML = data.tarif.ts+"%";

                    let tspMontant =  document.getElementById("tspMontant");
                    let TSP = data.tarif.ts*VI/100;
                    tspMontant.innerHTML = TSP;

                    let totalDt =  document.getElementById("totalDt");
                     dot = TSP+TUA+CCI+TCI+RST+PCI+DACC+TVA+DD;
                    totalDt.innerHTML = cfa.format(dot);

                    let totalVs =  document.getElementById("totalVs");
                    
                    totalVs.innerHTML = cfa.format(tauxRetourner*statistique);

                    let totalHAD =  document.getElementById("totalHAD");
                    had = (0.5/100)*VI
                    totalHAD.innerHTML = cfa.format(had);

                    let coutRevient =  document.getElementById("coutRevient");
                    
                    
                    
                  coutRevient.innerHTML = cfa.format(tauxRetourner*statistique-(TVA+PCI)+dot+had);
                    

                      }else{
                        let VI = parseFloat(vi)*tauxRetourner;
                    let viTd =  document.getElementById("viTd");
                    viTd.innerHTML = VI;
                    
                    let ddQuotite =  document.getElementById("ddQuotite");
                    ddQuotite.innerHTML = data.tarif.quotite+"%";

                    let ddMontant =  document.getElementById("ddMontant");
                    let DD = VI*parseFloat(data.tarif.quotite)/100;
                    ddMontant.innerHTML = DD;

                    //ligne TVA
                    let tvaTd =  document.getElementById("tvaTd");
                    tvaTd.innerHTML = VI+DD ;
                    
                    let tvaIndice = parseFloat($("#tvaDestination").val());
                    let tvaQuotite =  document.getElementById("tvaQuotite");
                    tvaQuotite.innerHTML = $("#tvaDestination").val()+"%";

                    let tvaMontant =  document.getElementById("tvaMontant");
                    let TVA = parseInt(data.tarif.tva)*(parseFloat(tvaIndice)/100)*(VI+DD)
                    tvaMontant.innerHTML = TVA;
                    
                    //ligne DACC
                    let daccTd =  document.getElementById("daccTd");
                    daccTd.innerHTML = VI+DD+TVA;
                    
                   
                    let daccQuotite =  document.getElementById("daccQuotite");
                    daccQuotite.innerHTML = data.tarif.dacc+"%";

                    let daccMontant =  document.getElementById("daccMontant");
                    let DACC = parseFloat(data.tarif.dacc)*(VI+DD+TVA)/100;
                    daccMontant.innerHTML = DACC;

                    //ligne PCI
                    let pciTd =  document.getElementById("pciTd");
                    pciTd.innerHTML = VI;
                    
                   
                    let pciQuotite =  document.getElementById("pciQuotite");
                    pciQuotite.innerHTML = 4+"%";

                    let pciMontant =  document.getElementById("pciMontant");
                    let PCI = 4*(VI)/100;
                    pciMontant.innerHTML = PCI;

                    //ligne RST
                    let rstTd =  document.getElementById("rstTd");
                    rstTd.innerHTML = VI;
                    
                   
                    let rstQuotite =  document.getElementById("rstQuotite");
                    rstQuotite.innerHTML = 2+"%";

                    let rstMontant =  document.getElementById("rstMontant");
                    let RST = 2*(VI)/100;
                    rstMontant.innerHTML = RST;
                    
                    //ligne TCI
                    let tciTd =  document.getElementById("tciTd");
                    tciTd.innerHTML = VI;
                    
                   
                    let tciQuotite =  document.getElementById("tciQuotite");
                    tciQuotite.innerHTML = 1+"%";

                    let tciMontant =  document.getElementById("tciMontant");
                    let TCI = VI/100;
                    tciMontant.innerHTML = TCI;

                    //ligne CCI
                    let cciTd =  document.getElementById("cciTd");
                    cciTd.innerHTML = VI;
                    
                   
                    let cciQuotite =  document.getElementById("cciQuotite");
                    cciQuotite.innerHTML = "0,40 %";

                    let cciMontant =  document.getElementById("cciMontant");
                    let CCI = 0.4*VI/100;
                    cciMontant.innerHTML = CCI;

                    //ligne TUA
                    let tuaTd =  document.getElementById("tuaTd");
                    tuaTd.innerHTML = VI;
                    
                   
                    let tuaQuotite =  document.getElementById("tuaQuotite");
                    tuaQuotite.innerHTML = "0,20 %";

                    let tuaMontant =  document.getElementById("tuaMontant");
                    let TUA = 0.2*VI/100;
                    tuaMontant.innerHTML = TUA;
                    
                    //ligne TSP
                    let tspTd =  document.getElementById("tspTd");
                    tspTd.innerHTML = VI;
                    
                   
                    let tspQuotite =  document.getElementById("tspQuotite");
                    tspQuotite.innerHTML = data.tarif.ts+"%";

                    let tspMontant =  document.getElementById("tspMontant");
                    let TSP = data.tarif.ts*VI/100;
                    tspMontant.innerHTML = TSP;

                    let totalDt =  document.getElementById("totalDt");
                     dot = TSP+TUA+CCI+TCI+RST+PCI+DACC+TVA+DD;
                    totalDt.innerHTML = cfa.format(dot);

                    let totalVs =  document.getElementById("totalVs");
                    
                    totalVs.innerHTML = cfa.format(tauxRetourner*statistique);

                    let totalHAD =  document.getElementById("totalHAD");
                    had = (0.5/100)*VI
                    totalHAD.innerHTML = cfa.format(had);

                    let coutRevient =  document.getElementById("coutRevient");
                    
                    
                    
                    coutRevient.innerHTML = cfa.format(tauxRetourner*statistique-(TVA+PCI)+dot+had);
                    
                        
                      }
                    }
                    
                    /*
                    let B = parseInt(A*quotite)/100;
                    //tva
                    let valeurTVA =  parseFloat(document.getElementById("paysTva").value);
                    //alert(valeurTVA);
                    let assujetieTVA =  parseInt(document.getElementById("Tva2-"+donnee[1]).value);
                    let daccQuotite =  parseInt(document.getElementById("Dacc2-"+donnee[1]).value);
                    //alert(assujetieTVA);

            let C= parseFloat(assujetieTVA*(A+B)*valeurTVA/100);
            let D = parseFloat((A+C)*daccQuotite/100);
            let AC4 = parseFloat(((A+B)*4)/100);
            let RST =parseFloat(A*2/100) ;
            let TCI = parseFloat(A/100) ; 
            let CCI = parseFloat(A*0.4/100) ;
            let TUA = parseFloat(A*0.2/100);
            let TS = parseFloat(A*parseInt(tsInputValue));
            //alert(AC4);
            Acpteinput.setAttribute("value",AC4);
            tvaInput.setAttribute("value",C);
            daccInput.setAttribute("value",D);
            taxesInput.setAttribute("value",B);
            Tciinput.setAttribute("value",TCI);
            Tuainput.setAttribute("value",TUA);
            CCIinput.setAttribute("value",CCI);
            RSTinput.setAttribute("value",RST);
            tsInput.setAttribute("value",TS);*/

                    }});
              
              }
            /*
            $.ajax({
                url: "{% url 'ajax_gettarif' %}",
                data: {
                'id': tarifId
                },
                dataType: 'json',
                success: function (data) {
                   
                   body = document.getElementById("simulateur");
                   tr = document.createElement('tr');
                   tr.setAttribute("id","simulateur-"+tarifId);
                   tdNomenclature = document.createElement('td');
                   tdNomenclature.innerHTML= data.tarif.nomenclature
                   tr.appendChild(tdNomenclature);
                    /*
                   tdLibelle = document.createElement('td');
                   tdLibelle.innerHTML = data.tarif.libelleNomenclature;
                   tr.appendChild(tdLibelle);*/
                    /*
                   tdQuotite = document.createElement('td');
                   inputQuotite = document.createElement('input');
                   inputQuotite.setAttribute('id',"quotite-"+tarifId);
                   inputQuotite.setAttribute('type',"text");
                   inputQuotite.setAttribute('style',"border:0px");
                     
                   inputQuotite.setAttribute('disabled',"disabled");
                   inputQuotite.setAttribute('class',"form-control");
                   inputQuotite.setAttribute('value',data.tarif.quotite);
                   tdQuotite.appendChild(inputQuotite);
                   tr.appendChild(tdQuotite);
                    
                 

                   tdPA = document.createElement('td');
                   inputPA = document.createElement('input');
                   inputPA.setAttribute("type","text");
                   inputPA.setAttribute("value","");
                   inputPA.setAttribute("style","border:0px");
                   inputPA.setAttribute('class',"form-control");
                   inputPA.setAttribute("id","pa-"+tarifId);
                   inputPA.setAttribute("onBlur","javascript:calculeTaxe(this);return false;")
                   tdPA.appendChild(inputPA);
                   tr.appendChild(tdPA);
                   
                 

                   tdTaxes = document.createElement('td');
                   inputTaxes = document.createElement('input');
                   inputTaxes.setAttribute("id","taxes-"+tarifId);
                   inputTaxes.setAttribute("type","text");
                   inputTaxes.setAttribute("style","border:0px;");
                   inputTaxes.setAttribute('disabled',"disabled"); 
                   inputTaxes.setAttribute('class',"form-control"); 
                   tdTaxes.appendChild(inputTaxes);
                   tr.appendChild(tdTaxes);

                   tdTva = document.createElement('td');
                   inputTva  = document.createElement('input');
                   inputTva.setAttribute('id',"Tva-"+tarifId);
                   inputTva.setAttribute('type',"text");  
                   inputTva.setAttribute('style',"border:0px;");  
                   inputTva.setAttribute('disabled',"disabled");  
                   inputTva.setAttribute('class',"form-control");  
                   inputTva2  = document.createElement('input');
                   inputTva2.setAttribute('id',"Tva2-"+tarifId);
                   inputTva2.setAttribute('type',"text");  
                   inputTva2.setAttribute('style',"border:0px;");  
                   inputTva2.setAttribute('value',data.tarif.tva);  
                   inputTva2.setAttribute('hidden',"hidden");  
                   tdTva.appendChild(inputTva);
                   tdTva.appendChild(inputTva2);
                   tr.appendChild(tdTva);

                   tdDacc = document.createElement('td');
                   inputDacc  = document.createElement('input');
                   inputDacc.setAttribute('id',"Dacc-"+tarifId);
                   inputDacc.setAttribute('type',"text");  
                   inputDacc.setAttribute('style',"border:0px;");  
                   inputDacc.setAttribute('disabled',"disabled");  
                   inputDacc2  = document.createElement('input');
                   inputDacc2.setAttribute('id',"Dacc2-"+tarifId);
                   inputDacc2.setAttribute('type',"text");  
                   inputDacc2.setAttribute('style',"border:0px;");  
                   inputDacc2.setAttribute('value',data.tarif.dacc);  
                   inputDacc2.setAttribute('hidden',"hidden");  
                   tdDacc.appendChild(inputDacc);
                   tdDacc.appendChild(inputDacc2);
                   tr.appendChild(tdDacc);

                   tdAcpte = document.createElement('td');
                   inputAcpte = document.createElement('input');
                   inputAcpte.setAttribute('id',"Acpte-"+tarifId);
                   inputAcpte.setAttribute('type',"text");  
                   inputAcpte.setAttribute('style',"border:0px;");  
                   inputAcpte.setAttribute('disabled',"disabled");  
                   inputAcpte.setAttribute('class',"form-control"); 
                   tdAcpte.appendChild(inputAcpte);
                   tr.appendChild(tdAcpte);

                   tdRst = document.createElement('td');
                   inputRst  = document.createElement('input');
                   inputRst.setAttribute('id',"Rst-"+tarifId);
                   inputRst.setAttribute('type',"text");  
                   inputRst.setAttribute('style',"border:0px;");  
                   inputRst.setAttribute('disabled',"disabled");  
                   inputRst.setAttribute('class',"form-control"); 
                   tdRst.appendChild(inputRst);
                   tr.appendChild(tdRst);

                   tdTci = document.createElement('td');
                   inputTci  = document.createElement('input');
                   inputTci.setAttribute('id',"Tci-"+tarifId);
                   inputTci.setAttribute('type',"text");  
                   inputTci.setAttribute('style',"border:0px;");  
                   inputTci.setAttribute('disabled',"disabled");  
                   inputTci.setAttribute('class',"form-control"); 
                   tdTci.appendChild(inputTci);
                   tr.appendChild(tdTci);

                   tdCci = document.createElement('td');
                   inputCci  = document.createElement('input');
                   inputCci.setAttribute('id',"Cci-"+tarifId);
                   inputCci.setAttribute('type',"text");  
                   inputCci.setAttribute('style',"border:0px;");  
                   inputCci.setAttribute('disabled',"disabled");  
                   inputCci.setAttribute('class',"form-control");  
                   tdCci.appendChild(inputCci);
                   tr.appendChild(tdCci);

                   tdTua = document.createElement('td');
                   inputTua  = document.createElement('input');
                   inputTua.setAttribute('id',"Tua-"+tarifId);
                   inputTua.setAttribute('type',"text");  
                   inputTua.setAttribute('style',"border:0px;");  
                   inputTua.setAttribute('disabled',"disabled");  
                   inputTua.setAttribute('class',"form-control"); 
                   tdTua.appendChild(inputTua);
                   tr.appendChild(tdTua);

                   tdTs = document.createElement('td');
                   inputTs  = document.createElement('input');
                   inputTs.setAttribute('id',"Ts-"+tarifId);
                   inputTs.setAttribute('type',"text");  
                   inputTs.setAttribute('style',"border:0px;");  
                   inputTs.setAttribute('value',data.tarif.ts);  
                   inputTs.setAttribute('disabled',"disabled");  
                   inputTs.setAttribute('class',"form-control");  
                   tdTs.appendChild(inputTs);
                   tr.appendChild(tdTs);

                   body.appendChild(tr);
                   tabId[nbclick]=tarifId;
                   nbclick++;
                   $("#exampleModal").modal('hide');
                   $("#ajoutForm")[0].reset(); 

                }
            });*/
        


 </script>

</body>
</html>
